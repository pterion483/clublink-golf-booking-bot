# Claude Code Golf Booking System - DIRECT MCP EXECUTION
# This configuration uses Claude Code with MCP tools directly instead of prompt generation

# Environment
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/home/dmin1/.local/bin:/home/dmin1/.nvm/versions/node/v20.19.4/bin

# OPTION 1: Direct MCP Execution via Python Scripts
# Main Booking Jobs - Uses direct_mcp_executor.py
25 6 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/direct_mcp_executor.py prestage >> /home/dmin1/Golf\ Tee\ Times\ Bot/logs/direct_prestage_$(date +\%Y\%m\%d).log 2>&1
30 6 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/direct_mcp_executor.py book >> /home/dmin1/Golf\ Tee\ Times\ Bot/logs/direct_booking_$(date +\%Y\%m\%d).log 2>&1

# Gap Finder Jobs - Direct execution
*/15 6-21 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/direct_mcp_executor.py gap >> /home/dmin1/Golf\ Tee\ Times\ Bot/logs/direct_gap_$(date +\%Y\%m\%d).log 2>&1
0 22,23 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/direct_mcp_executor.py gap-night >> /home/dmin1/Golf\ Tee\ Times\ Bot/logs/direct_gap_night_$(date +\%Y\%m\%d).log 2>&1
0 0-5 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/direct_mcp_executor.py gap-night >> /home/dmin1/Golf\ Tee\ Times\ Bot/logs/direct_gap_night_$(date +\%Y\%m\%d).log 2>&1

# OPTION 2: Claude Code Wrapper (Alternative approach)
# Uncomment these lines and comment out Option 1 to use the wrapper approach
# 25 6 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/claude_code_wrapper.sh prestage
# 30 6 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/claude_code_wrapper.sh book
# */15 6-21 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/claude_code_wrapper.sh gap
# 0 22,23 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/claude_code_wrapper.sh gap-night
# 0 0-5 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/claude_code_wrapper.sh gap-night

# OPTION 3: MCP Codex Direct Execution (Advanced)
# Uses mcp__codex tools directly - requires Claude Code environment
# 25 6 * * * cd "/home/dmin1/Golf Tee Times Bot" && echo "Execute golf booking pre-staging with MCP Playwright tools. Navigate to login, enter credentials 224816/160599Golf, set up form for $(date -d '+5 days' '+%Y-%m-%d'), select 6 primary courses, but do not submit. Leave ready for 6:30 AM execution." | claude --print --model sonnet --dangerously-skip-permissions
# 30 6 * * * cd "/home/dmin1/Golf Tee Times Bot" && echo "Execute time-critical golf booking at exactly 6:30 AM using MCP Playwright tools. Click Search, immediately handle Cloudflare at (464,572) within 1 second, book earliest morning time." | claude --print --model sonnet --dangerously-skip-permissions

# Maintenance and Cleanup
0 3 * * * find "/home/dmin1/Golf Tee Times Bot/screenshots" -type f -name "*.png" -mtime +7 -delete 2>/dev/null
0 3 * * * find "/home/dmin1/Golf Tee Times Bot/logs" -type f -name "*direct*" -mtime +14 -delete 2>/dev/null
0 2 * * 0 cd "/home/dmin1/Golf Tee Times Bot/logs" && gzip -9 *.log 2>/dev/null; find . -name "*.gz" -mtime +30 -delete

# Health Check - Verify system is working
0 7 * * * /home/dmin1/Golf\ Tee\ Times\ Bot/direct_mcp_executor.py gap >> /home/dmin1/Golf\ Tee\ Times\ Bot/logs/health_check_$(date +\%Y\%m\%d).log 2>&1